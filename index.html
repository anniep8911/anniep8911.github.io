<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïõπ ÌçºÎ∏îÎ¶¨ÏÖî Î∞ïÏ†ïÏïÑ</title>
    <link rel="stylesheet" href="./assets/style/main.css">
</head>
<body>
    <h1>ÏõπÌçºÎ∏îÎ¶¨ÏÖî Î∞ïÏ†ïÏïÑ Í∞úÏù∏ ÌéòÏù¥ÏßÄÏûÖÎãàÎã§.</h1>
    <div class="wrap">
        <div class="left-wrap">
            <header>
                <article class="hdr-left">
                    <div class="btns">
                        <h3>profile</h3>
                        <div class="btn-more">‚Ä¢‚Ä¢‚Ä¢</div>
                        <ul class="option-list close">
                            <li>kakao talk</li>
                            <li>notion</li>
                            <li>slack</li>
                            <li>git</li>
                        </ul>
                    </div>
                    <div class="image">personal image
                        <span>available</span>
                    </div>
                    <div class="txts">
                        <h2>Jeong A Park</h2>
                        <p>UI Developer</p>
                    </div>
                    <video src="./assets/image/sulsan.mp4" muted autoplay loop></video>
                </article>
                <article class="hdr-right">
                    <ul class="opts">
                        <li>skills</li>
                        <li>tools</li>
                    </ul>
                    <div class="charts">

                    </div>
                    <!-- <canvas id="charts"></canvas> -->
                </article>
            </header>
            <section class="cont01">
                <header>
                    <h2>Projects</h2>
                    <ul class="opts">
                        <li>2024</li>
                        <li>2023</li>
                        <li>2022</li>
                        <li>2021</li>
                        <li>Show all</li>
                    </ul>
                </header>
               <section>
                    <ul class="chart-prog">
                        <li>2024.01</li>
                        <li>2024.02</li>
                        <li>2024.03</li>
                    </ul>
                    <div class="projects">
                       <!-- ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Îì§Ïñ¥Í∞ÄÎäî ÏûêÎ¶¨ -->
                    </div>
                </section>
            </section>
        </div>
        <div class="right-wrap">
            <header>
                <h2>Works</h2>
                <ul class="opts">
                    <li>Company</li>
                    <li>Personal</li>
                </ul>
            </header>
            <section class="cont02">
             <!-- ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Îì§Ïñ¥Í∞ÄÎäî ÏûêÎ¶¨ -->
            </section>
        </div>
        <!-- Ï±óÎ¥á -->
        <div class="robot-response">
            <div class="robot">Ï±óÎ¥á</div>
            <div class="hdr">
                <h3>Ï†ÄÏóê ÎåÄÌï¥ÏÑú Í∂ÅÍ∏àÌïúÏ†êÏù¥ ÏûàÎÇòÏöî?</h3>
                <p>Í∂ÅÍ∏àÌïú ÎÇ¥Ïö©ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!</p>
                <div class="btn-close">X</div>
            </div>
            <ul class="answer">
                <div class="ans-gr">
                  <!-- ÏßàÎ¨∏ÎÇ¥Ïö© Î∞îÏù∏Îî© Îê† Í≥≥ -->
                </div>
                <li class="others">
                    <!-- ÏßàÎ¨∏ Îç∞Ïù¥ÌÑ∞ Îì§Ïñ¥Ïò§ÎäîÍ≥≥ -->
                </li>
            </ul>
        </div>
        <!-- ÎîîÌÖåÏùº ÌåùÏóÖ -->
        <div class="detailed-pops close">
            <header>
                <h2>ÌîÑÎ°úÏ†ùÌä∏Î™Ö</h2>
                <h4><span>ÏßÑÌñâ ÌöåÏÇ¨Î™Ö</span> <span>ÏßÑÌñâ ÎÖÑÏõî</span></h4>
                <h3>Ï£ºÏöî ÏÑ±Í≥º: <span>ÏÑ±Í≥ºÎÇ¥Ïö©</span></h3>
                <p><span>hash1</span><span>hash1</span><span>hash1</span><span>hash1</span></p>
            </header>
            <section>
                <div class="image"></div>
            </section>
            <div class="btn-close">üõ†</div>
        </div>
    </div>

    <!-- Îç∞Ïù¥ÌÑ∞ Î∞îÏù∏Îî© Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script>
        async function getData(url){
            try{
                const response = await fetch(url,{
                    method: "GET",
                    headers:{
                        "Content-type":"application/json",
                    }
                });
                return await response.json();
            }catch(e){
                throw e;
        }};

        async function dataLoading(url){
            let prd =[];
            url.forEach(e=>{
                prd.push(e);
            });

            return prd;
        }

        getData('./assets/data/data.json').then(async res=>{
            let prd = await dataLoading(res.projects);
            const cont01Prd = document.querySelector('.cont01 .projects');
            const cont02Prd = document.querySelector('.cont02');
            prd.forEach(p=>{
                let hashes = [];
                p.hashes.forEach((e)=>{
                    hashes.push(` <span>#${e}</span> `)
                });
                let addPrd = `<article data-attr=${p.month}>
                                <div class="image" style="background:url('${p.icon}') #fff no-repeat center left; background-size:contain">projects image</div>
                                <div class="texts">
                                    <h3>${p.name}</h3>
                                    <div class="months">${p.month}</div>
                                    <div class="stmonth">1</div>
                                </div>
                            </article>`;
                let addPrd2 = `<article>
                    <div class="image"></div>
                    <div class="texts">
                        <div class="btns">
                            <div class="btn">${p.year}</div>
                            <div class="btn-more">ÔΩ•ÔΩ•ÔΩ•</div>
                        </div>
                        <h3>${p.name}</h3>
                        <p>
                            ${hashes.join('')}
                        </p>
                    </div>
                </article>`;

                cont01Prd.innerHTML += addPrd;
                cont02Prd.innerHTML += addPrd2;

            });
            // UIÌï®Ïàò Ïã§Ìñâ
            uiWorks(prd);
        });


        getData('./assets/data/que.json').then(async res=>{
            let prd = await dataLoading(res.questions);
            let questions =[];
            const resQue = document.querySelector('.robot-response .others');
            prd.forEach(e=>{
                resQue.innerHTML += `<span>${e.que}</span>`;
            });
            // UIÌï®Ïàò Ïã§Ìñâ
            chatBot(prd);
        })
    </script>


    <!-- Ï∞®Ìä∏Ïö© ÌîåÎü¨Í∑∏Ïù∏ -->
    <script src="./assets/js/chart.js"></script>
    <script>
        
        const setChart=(label,datas,bgc)=>{
            const ctxWrap = document.querySelector('.charts');
            ctxWrap.innerHTML='<canvas id="charts"></canvas>';
            const ctx = document.querySelector('#charts'); 
            new Chart(ctx, {
                type: 'radar',
                data: {
                labels: label,
                datasets: [{
                    label: 'Level',
                    data: datas,
                    borderWidth: 0,
                    backgroundColor:bgc,
                    hoverBackgroundColor:'blue',
                    pointRotation:5,
                }]
                },
                options: {
                    scales: {
                        r: {
                        beginAtZero: true,
                        min:0,
                        max:5,
                        stepSize:1,
                        }
                    },
                    plugins:{
                        legend:{
                            display:false
                        }
                    }
                }
            });
        }
        setChart(['HTML', 'CSS/SCSS', 'JavaScript', 'Node.js', 'Vue.js', 'React.js'],[4,4.5,4.8,3.9,3,3],'rgba(255, 99, 71, 0.4)');
    </script>

    <!-- UIÏä§ÌÅ¨Î¶ΩÌä∏ -->
    <script>
        // Ïª®ÌÖêÏ∏† ui Ïä§ÌÅ¨Î¶ΩÌä∏ 
        function uiWorks(prd){
            const opts = document.querySelectorAll('.opts');
            const optsList = document.querySelectorAll('.opts li');
            const mores =  document.querySelectorAll('.btn-more');
            const robots = document.querySelector('.robot-response');
            const robotChar= document.querySelector('.robot-response .robot');
            const robotsClose = document.querySelector('.robot-response .btn-close');
            const cont1Art = document.querySelectorAll('.cont01 article');
            const cont2Art = document.querySelectorAll('.cont02 article');
            const modal = document.querySelector('.detailed-pops');
            const modalClose = document.querySelector('.detailed-pops .btn-close');

            const popHdrName = document.querySelector('.detailed-pops header h2');
            const popHdrCompany = document.querySelector('.detailed-pops header h4 span:nth-of-type(1)');
            const popHdrGoal = document.querySelector('.detailed-pops header h3 span');
            const popHdrDate = document.querySelector('.detailed-pops header h4 span:nth-of-type(2)');
            const popHdrHashes = document.querySelector('.detailed-pops header p');
            const popDetail = document.querySelector('.detailed-pops section .image');

            const setModal = (name,company,date,hashes,details,goal)=>{
                popHdrName.innerText =name;
                popHdrCompany.innerText =company;
                popHdrDate.innerText = date;
                popHdrGoal.innerText=goal;
                let hashes2 = [];
                hashes.forEach((e)=>{hashes2.push(` <span>#${e}</span> `)});
                popHdrHashes.innerHTML = hashes2.join('');
                let type = details.split('.');
                type[type.length-1]==='pdf'?
                popDetail.innerHTML = `<embed type="application/pdf" src="${details}" width="100%" height="800" />`
                :
                popDetail.innerHTML = `<img src="${details}">`;
            }
            
            const addClass=(node,classname)=>{
                node.classList[1]==classname?'':node.className +=` ${classname}`;
            }

            const removeClass=(node,classname)=>{
                console.log(node.classList[1]);
                console.log(classname);
                node.classList.remove(classname);
            }

            const toggleClass=(node,className)=>{
                node.classList[1]==className?
                node.classList.remove(className):node.className +=` ${className}`;
            }

    
            opts.forEach(e=>{
                e.addEventListener('click',(er)=>{
                    toggleClass(er.currentTarget,'open',true);
                })
            });
    
            optsList.forEach((e,i)=>{
                e.addEventListener('click',(er)=>{
                    let par = er.currentTarget.parentElement;
                    par.prepend(er.currentTarget);
                    i<2?er.currentTarget.innerText=='Tools'?
                    setChart(['Git', 'SVN', 'Jira', 'Confluence','slack'],[4,4.5,4.8,4,4],'rgba(62, 122, 164, 0.5)'): setChart(['HTML', 'CSS/SCSS', 'JavaScript', 'Node.js', 'Vue.js', 'React.js'],[4,4.5,4.8,3.9,3,3],'rgba(255, 99, 71, 0.4)'):'';
                })
            });
            
            mores.forEach(e=>{
                e.addEventListener('click',(ee)=>{
                    let nexts =ee.currentTarget.nextElementSibling;
                    toggleClass(nexts,'close');
                })
            })
            
            robotChar.addEventListener('click',(e)=>{
                !robots.classList.contains('open')?addClass(robots,'open',false):'';
            })
            robotsClose.addEventListener('click',(e)=>{
                robots.classList.contains('open')?robots.classList.remove('open'):'';
            })
            
            cont2Art.forEach((e,i)=>{
                e.addEventListener('click',(ee)=>{
                    cont2Art.forEach((el)=>{
                        el.classList.remove('selected');
                    });
                    ee.currentTarget.className += ' selected';
                    modal.classList.remove('close');
                    setModal(prd[i].name,prd[i].company,`${prd[i].year}.${prd[i].month}`,prd[i].hashes,prd[i].path,prd[i].goal);
                })
            });



            cont1Art.forEach((e,i)=>{
                e.addEventListener('click',()=>{
                    modal.classList.remove('close');
                    cont2Art.forEach((el)=>{
                        el.classList.remove('selected');
                    });
                    cont2Art[i].className += ' selected';
                    setModal(prd[i].name,prd[i].company,`${prd[i].year}.${prd[i].month}`,prd[i].hashes,prd[i].path,prd[i].goal);
                })
            })
    
            modalClose.addEventListener('click',()=>{
                modal.className += ' close';
            })


        }

        // Ï±óÎ¥á uiÏä§ÌÅ¨Î¶ΩÌä∏ 
        function chatBot(prd){
            const que = document.querySelectorAll('.robot-response .others span');
            const ans = document.querySelector('.robot-response .ans-gr');
            let cnt2 = 0;
            que.forEach((e,i)=>{
                e.addEventListener('click',()=>{
                    let anstype=[...prd[i].ans];
                    let cnt=0;
                    let ans1=[];
                    let qq = `<li class="que"><span>${prd[i].que}</span></li>`;
                    let aa = `<li class="ans"></li>`;
                    
                    cnt2++;
                    ans.innerHTML += qq+aa;
                    let add = document.querySelectorAll('.ans-gr li.ans');

                    const addLetter=()=>{
                        ans1.push(anstype[cnt]); 
                        cnt++;
                        cnt > anstype.length? clearInterval(st):add[cnt2-1].innerText = ans1.join('');
                    };
                    
                    let st = setInterval(addLetter,50);
                    
                })
            })
        }

    </script>

</body>
</html>